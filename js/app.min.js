"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}document.addEventListener("DOMContentLoaded",(function(){function e(e){var t=0,r=window.innerWidth-document.body.offsetWidth+"px",a=document.querySelectorAll(".fixed");e?(document.body.classList.add("scroll-disabled"),t=window.pageYOffset,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="-"+t+"px",document.body.style.width="100%",document.body.style.paddingRight=r,a&&a.forEach((function(e){e.style.marginRight=r}))):(document.body.classList.remove("scroll-disabled"),t=Math.abs(parseInt(document.querySelector("body").style.top.replace("px",""))),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),document.body.style.removeProperty("width"),document.body.style.removeProperty("padding-right"),a&&a.forEach((function(e){e.style.removeProperty("margin-right")})),window.scrollTo({top:isNaN(t)?0:t,behavior:"instant"}))}function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,r=e.querySelectorAll(".categories__list-item"),a=0;r.forEach((function(e,r){r<=t&&(a+=e.getBoundingClientRect().height,r>0&&(a+=14))})),e.style.maxHeight=a+"px"}function r(){oe.style.height="calc(100dvh - "+Number(document.querySelector(".header__fixed").getBoundingClientRect().top+(document.querySelector(".header__wrapper--main").getBoundingClientRect().height-1))+"px)",oe.style.maxHeight="calc(100dvh - "+Number(document.querySelector(".header__fixed").getBoundingClientRect().top+(document.querySelector(".header__wrapper--main").getBoundingClientRect().height-1))+"px)",ce.style.maxHeight="calc(100dvh - "+Number(document.querySelector(".header__fixed").getBoundingClientRect().top+(document.querySelector(".header__wrapper--main").getBoundingClientRect().height-1))+"px)",ne.style.maxHeight="calc(100dvh - "+Number(document.querySelector(".header__fixed").getBoundingClientRect().top+(document.querySelector(".header__wrapper--main").getBoundingClientRect().height-1))+"px)"}function a(){var e=document.querySelector(".catalog__right"),t=document.querySelector(".catalog-filter__links"),r=document.querySelector(".catalog-filter__main");t&&(window.innerWidth<=1023?e&&(e.querySelector(".catalog__sort")?setTimeout((function(){e.querySelector(".catalog__sort").before(t)}),50):e.querySelector(".catalog__empty")&&setTimeout((function(){e.querySelector(".catalog__empty").before(t)}),50)):r&&setTimeout((function(){r.before(t)}),50))}function i(e){var t,r=[],a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;r.includes(i)||r.push(i)}}catch(e){a.e(e)}finally{a.f()}return r}a();var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="none"),window.setTimeout((function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="auto")}),t),e.parentNode.classList.remove("is--open")},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;e.style.removeProperty("display");var r=window.getComputedStyle(e).display;"none"===r&&(r="block"),e.style.display=r;var a=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=a+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="none"),window.setTimeout((function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="auto")}),t),e.parentNode.classList.add("is--open")},c=function(e,t){var r=function(r){for(var i=r.target;i&&!e.includes(i);)i=i.parentNode;i||(t(),a())};function a(){document.documentElement.removeEventListener("click",r)}return{setBodyChecker:function(){document.documentElement.addEventListener("click",r)},removeBodyChecker:a}};Inputmask().mask(document.querySelectorAll("input"));var n=document.querySelectorAll("textarea");n&&n.forEach((function(e){e.style.height=e.setAttribute("style","height: "+e.scrollHeight+"px"),e.classList.add("auto"),e.addEventListener("input",(function(t){e.style.height="auto",e.style.height=e.scrollHeight+"px"}))}));var l=document.querySelectorAll(".catalog-filter__range-slider");l&&l.forEach((function(e){var t=e.closest(".catalog-filter__range"),r=[t.querySelector(".range-field__input--min"),t.querySelector(".range-field__input--max")];noUiSlider.create(e,{start:[Number(e.dataset.rangeStart),Number(e.dataset.rangeEnd)],connect:!0,range:{min:Number(e.dataset.rangeMin),max:Number(e.dataset.rangeMax)}}),e.noUiSlider.on("update",(function(e,t){r[t].value=Number(e[t]).toFixed(2)})),r.forEach((function(t,r){t.addEventListener("change",(function(){e.noUiSlider.setHandle(r,Number(this.value).toFixed(2))})),t.addEventListener("keydown",(function(t){var a,i=e.noUiSlider.get(),s=Number(i[r]),o=e.noUiSlider.steps()[r];switch(t.which){case 13:e.noUiSlider.setHandle(r,Number(this.value).toFixed(2));break;case 38:!1===(a=o[1])&&(a=1),null!==a&&e.noUiSlider.setHandle(r,Number(s+a).toFixed(2));break;case 40:!1===(a=o[0])&&(a=1),null!==a&&e.noUiSlider.setHandle(r,Number(s-a).toFixed(2))}}))}))}));var d=document.querySelector(".catalog-filter__range");d&&d.addEventListener("click",(function(e){e.preventDefault();var t=document.querySelectorAll(".range-field__input");t&&t.forEach((function(e){e.removeAttribute("disabled")}))}));var u=document.querySelectorAll(".js-select");u&&u.forEach((function(e){new SlimSelect({select:e})}));var p=document.querySelectorAll(".desktop-select__selected"),m=document.querySelectorAll(".desktop-select__btn");p&&(p.forEach((function(e){var t=function(){e.closest(".desktop-select").classList.remove("is--active")},r=c([e.parentNode],t);e.addEventListener("click",(function(a){a.preventDefault();var i=e.closest(".desktop-select");i.classList.contains("is--active")?t():(i.classList.add("is--active"),r.setBodyChecker())}))})),m&&m.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var r=e.closest(".desktop-select");r.querySelector(".desktop-select__selected").innerHTML=e.innerHTML,r.querySelector(".desktop-select__btn.is--active").classList.remove("is--active"),e.classList.add("is--active"),r.classList.remove("is--active")}))})));var _=document.getElementById("cookies"),h=document.getElementById("cookies-trigger"),v=document.getElementById("js-cookies-btn");_&&("false"!==localStorage.cookiesAlert&&"cookiesAlert"in localStorage?_.classList.remove("is--active"):_.classList.add("is--active"),h&&h.addEventListener("click",(function(e){e.preventDefault();var t=h.closest(".cookies__main");t.classList.contains("is--open")?(o(t.querySelector(".cookies__info"),200),s(t.querySelector(".cookies__dropdown"))):(s(t.querySelector(".cookies__info"),200),o(t.querySelector(".cookies__dropdown")))})),v&&v.addEventListener("click",(function(e){e.preventDefault(),_.classList.contains("is--active")&&(_.classList.remove("is--active"),localStorage.cookiesAlert="true")})));var y=document.querySelectorAll(".c-sm-info__trigger");y&&y.forEach((function(e){var t=function(){e.closest(".c-sm-info").classList.remove("is--active")},r=c([e.parentNode],t);e.addEventListener("click",(function(a){if(window.innerWidth<=743){a.preventDefault();var i=e.closest(".c-sm-info");i.classList.contains("is--active")?t():(i.classList.add("is--active"),r.setBodyChecker())}}))}));var f=document.querySelector(".top-notice"),g=document.querySelector(".top-notice__close");f&&g&&g.addEventListener("click",(function(e){e.preventDefault(),f.classList.contains("is--hidden")||(f.classList.add("is--hidden"),A.classList.contains("is--active")&&(A.style.paddingTop="".concat(b.getBoundingClientRect().height,"px"),A.querySelectorAll(".mobile-menu__wrap").forEach((function(e){return e.style.height="calc(100dvh - ".concat(b.getBoundingClientRect().height,"px)")})),A.style.transition="none",document.body.style.top="0px",window.scrollTo({top:0,behavior:"instant"}),setTimeout((function(){A.style.removeProperty("transition")}),50)))}));var b=document.querySelector(".header"),S=document.querySelector(".header-search"),L=document.querySelector(".header-search__input"),k=document.querySelector(".header-search__clear"),w=document.querySelector(".header-search__preview"),q=document.querySelector(".header-search__holder"),E=document.querySelectorAll(".header-search__btn"),x=document.querySelector(".header-search__close");S&&(k.addEventListener("click",(function(e){e.preventDefault(),L.value.length>0&&(L.value.length>0&&(L.value="",setTimeout((function(){document.querySelector(".title-search-result.search-block").innerHTML=""}),50)),w&&w.classList.remove("is--hidden"),q.classList.remove("is--active"))})),window.innerWidth<=1023?(E.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),b.classList.contains("is--search")||S.classList.contains("is--active")||(A.classList.contains("is--active")&&A.classList.remove("is--active"),b.classList.add("is--search"),S.classList.add("is--active"),L.value.length>=2?(w&&w.classList.add("is--hidden"),q.classList.add("is--active")):(w&&w.classList.remove("is--hidden"),q.classList.remove("is--active")),ae.classList.contains("is--active")?ae.classList.remove("is--active"):e(1))}))})),x.addEventListener("click",(function(t){t.preventDefault(),b.classList.contains("is--search")&&S.classList.contains("is--active")&&(L.value.length>0&&(L.value="",setTimeout((function(){document.querySelector(".title-search-result.search-block").innerHTML=""}),50)),b.classList.remove("is--search"),S.classList.remove("is--active"),e())}))):(L.addEventListener("focus",(function(){te.classList.contains("is--active")&&te.classList.remove("is--active"),S.classList.contains("header__search--long")||b.classList.add("is--search"),S.classList.add("is--active"),ae.classList.contains("is--active")?ae.classList.remove("is--active"):e(1)})),S.addEventListener("click",(function(t){t.target.classList.contains("header-search")&&(t.preventDefault(),L.value.length>0&&(L.value="",setTimeout((function(){document.querySelector(".title-search-result.search-block").innerHTML=""}),50)),b.classList.remove("is--search"),S.classList.remove("is--active"),e())}))));var A=document.getElementById("mobile-menu"),N=document.getElementById("hamburger-toggle"),C=(document.querySelector(".mobile-menu__close"),document.querySelector(".mobile-menu__btn--catalog")),B=document.querySelectorAll(".mobile-menu__link--category"),T=document.querySelectorAll(".mobile-menu__back");A&&N&&(N.addEventListener("click",(function(t){t.preventDefault(),A.classList.contains("is--active")?(b.classList.remove("is--menu"),N.classList.remove("is--active"),A.classList.remove("is--active"),e(0)):(document.querySelector(".top-notice:not(.is--hidden)")&&Math.abs(document.querySelector(".top-notice").getBoundingClientRect().top)<=document.querySelector(".top-notice").getBoundingClientRect().height?(A.style.paddingTop="calc(".concat(b.getBoundingClientRect().height,"px + ").concat(document.querySelector(".top-notice").getBoundingClientRect().height-Math.abs(document.querySelector(".top-notice").getBoundingClientRect().top),"px)"),A.querySelectorAll(".mobile-menu__wrap").forEach((function(e){return e.style.height="calc(100dvh - ".concat(b.getBoundingClientRect().height,"px - ").concat(document.querySelector(".top-notice").getBoundingClientRect().height-Math.abs(document.querySelector(".top-notice").getBoundingClientRect().top),"px)")}))):(A.style.paddingTop="".concat(b.getBoundingClientRect().height,"px"),A.querySelectorAll(".mobile-menu__wrap").forEach((function(e){return e.style.height="calc(100dvh - ".concat(b.getBoundingClientRect().height,"px)")}))),b.classList.add("is--menu"),N.classList.add("is--active"),A.classList.add("is--active"),P&&P.classList.contains("is--active")&&P.classList.remove("is--active"),e(1))})),C&&C.addEventListener("click",(function(e){e.preventDefault(),document.querySelector(".mobile-menu__holder--main").classList.remove("is--active"),document.querySelector(".mobile-menu__holder--catalog").classList.add("is--active")})),B&&B.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var r=e.dataset.category;document.querySelector(".mobile-menu__holder--catalog").classList.remove("is--active"),document.querySelector('.mobile-menu__holder[data-id="'+r+'"]').classList.add("is--active")}))})),T&&T.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var r=e.closest(".mobile-menu__holder");document.querySelectorAll(".mobile-menu__holder").forEach((function(e){return e.classList.remove("is--active")})),r.classList.contains("mobile-menu__holder--catalog")?document.querySelector(".mobile-menu__holder--main").classList.add("is--active"):document.querySelector(".mobile-menu__holder--catalog").classList.add("is--active")}))})));var P=document.getElementById("mobile-city-preview"),D=document.querySelectorAll(".mobile-city-preview__close"),M=document.querySelectorAll(".mobile-city-preview__btn");P&&D&&M&&(D.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),P.classList.contains("is--active")&&P.classList.remove("is--active")}))})),M.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),"true"===e.dataset.selected&&P.classList.remove("is--active")}))})));var H=document.querySelectorAll(".mobile-menu__link--trigger");H&&H.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),e.parentNode.classList.contains("is--open")?s(e.nextElementSibling):o(e.nextElementSibling)}))}));var R=document.getElementById("city-selection"),I=document.querySelectorAll(".city-selection-btn"),O=document.querySelector(".city-selection__close"),V=document.querySelector(".city-selection__input"),j=document.querySelector(".city-selection__info"),W=document.querySelector(".city-selection__results");document.querySelector(".city-selection__empty");R&&(R.addEventListener("click",(function(t){(t.target.classList.contains("city-selection")||t.target.classList.contains("city-selection__wrap"))&&(t.preventDefault(),R.classList.remove("is--active"),e())})),I.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),R.classList.contains("is--active")||(R.classList.add("is--active"),e(1),P&&P.classList.contains("is--active")&&P.classList.remove("is--active"),te&&te.classList.contains("is--active")&&te.classList.remove("is--active"))}))})),O.addEventListener("click",(function(t){t.preventDefault(),R.classList.contains("is--active")&&(R.classList.remove("is--active"),j.classList.add("is--active"),W.classList.remove("is--active"),V.value="",e())})),V.addEventListener("input",(function(e){e.preventDefault(),V.value.length>=2?(j.classList.remove("is--active"),W.classList.add("is--active"),axios({method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},url:"/ajax/get_cities.php",data:{string:V.value}}).then((function(e){document.querySelector(".city-selection__results .city-selection__list").classList.remove("is--hidden"),document.querySelector(".city-selection__empty").classList.remove("is--active");var t=document.querySelector(".city-selection__results").querySelector(".city-selection__list");t.innerHTML="",JSON.parse(JSON.stringify(e.data)).forEach((function(e,r){t.insertAdjacentHTML("afterbegin",'<li class="city-selection__item"><button class="city-selection__link" data-city="'.concat(e.NAME_RU,'">').concat(e.NAME_RU,"</button></li>"))}))})).catch((function(e){document.querySelector(".city-selection__results .city-selection__list").classList.add("is--hidden"),document.querySelector(".city-selection__empty").classList.add("is--active")}))):(j.classList.add("is--active"),W.classList.remove("is--active"))})));var Y=document.querySelector(".c-filter-trigger__btn"),F=document.querySelector(".catalog-filter"),U=document.querySelector(".catalog-filter__close");Y&&F&&U&&(Y.addEventListener("click",(function(t){t.preventDefault(),F.classList.contains("is--active")||(F.querySelectorAll(".catalog-filter__block--extended.is--active")&&(F.querySelectorAll(".catalog-filter__block--default").forEach((function(e){return e.classList.remove("is--hidden")})),F.querySelectorAll(".catalog-filter__block--extended").forEach((function(e){e.classList.remove("is--active"),e.style.transition="0s",setTimeout((function(){e.removeAttribute("style")}),500)}))),F.classList.add("is--active"),e(1))})),U.addEventListener("click",(function(t){t.preventDefault(),F.classList.remove("is--active"),e()})));var J=document.querySelectorAll(".catalog-filter__more"),Q=document.querySelectorAll(".catalog-filter__reset"),z=document.querySelectorAll(".catalog-filter__back"),G=document.querySelectorAll(".catalog-filter__checkbox"),K=document.querySelectorAll(".catalog-filter__search .c-search__input"),X=document.querySelectorAll(".catalog-filter__block--default .catalog-filter__checkboxes");J&&J.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var r=e.closest(".catalog-filter"),a=e.closest(".catalog-filter__block");a.nextElementSibling.classList.contains("catalog-filter__block--extended")&&(a.classList.add("is--hidden"),a.nextElementSibling.classList.add("is--active"),window.innerWidth<=1023&&(r.classList.add("scroll-disabled"),a.nextElementSibling.style.top=r.scrollTop+"px"))}))})),Q&&Q.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var r=e.closest(".catalog-filter"),a=e.closest(".catalog-filter__block");a.previousElementSibling.classList.contains("catalog-filter__block--default")&&(a.classList.remove("is--active"),a.previousElementSibling.classList.remove("is--hidden"),window.innerWidth<=1023&&(r.classList.remove("scroll-disabled"),a.style.top="0px"))}))})),z&&z.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var r=e.closest(".catalog-filter"),a=e.closest(".catalog-filter__block");a.previousElementSibling.classList.contains("catalog-filter__block--default")&&(a.classList.remove("is--active"),a.previousElementSibling.classList.remove("is--hidden"),window.innerWidth<=1023&&(r.classList.remove("scroll-disabled"),a.style.top="0px"))}))})),G&&G.forEach((function(e){e.addEventListener("click",(function(t){if(t.preventDefault(),e.classList.contains("catalog-filter__checkbox--preview")){var r=e.closest(".catalog-filter__block").nextElementSibling,a=e.querySelector(".square-checkbox__input"),i=a.dataset.id;r.classList.contains("catalog-filter__block--extended")&&(!0===a.checked?(r.querySelector("#"+i).checked=!1,a.checked=!1):(r.querySelector("#"+i).checked=!0,a.checked=!0),smartFilter.click(r.querySelector("#"+i)))}else{var s=e.closest(".catalog-filter__block").previousElementSibling,o=e.querySelector(".square-checkbox__input"),c=o.id;s.classList.contains("catalog-filter__block--default")&&(!0===o.checked?(s.querySelector(".square-checkbox__input[data-id="+c+"]")&&(s.querySelector(".square-checkbox__input[data-id="+c+"]").checked=!1),o.checked=!1):(s.querySelector(".square-checkbox__input[data-id="+c+"]")&&(s.querySelector(".square-checkbox__input[data-id="+c+"]").checked=!0),o.checked=!0))}}))})),K&&K.forEach((function(e){e.addEventListener("input",(function(t){t.preventDefault();var r=e.closest(".catalog-filter__block"),a=r.querySelectorAll(".catalog-filter__group"),i=r.querySelectorAll(".catalog-filter__letter"),s=r.querySelectorAll(".catalog-filter__checkbox");a&&(e.value.length>0?a.forEach((function(e){e.classList.add("is--hidden")})):a.forEach((function(e){e.classList.remove("is--hidden")}))),i&&(e.value.length>0?i.forEach((function(e){e.style.display="none"})):i.forEach((function(e){e.style.display="block"}))),s&&s.forEach((function(t){t.querySelector(".square-checkbox__title").innerText.toLowerCase().startsWith(e.value.toLowerCase())?t.style.display="block":t.style.display="none"}))}))})),X&&X.forEach((function(e){var t=e.closest(".catalog-filter__scroll"),r=e.getBoundingClientRect().height;r>290&&(t.style.maxHeight=r+"px")}));var Z=document.querySelector(".catalog__right"),ee=document.querySelector(".catalog__filtered");ee&&window.innerWidth>=1024&&Z&&(Z.querySelector(".catalog__sort")?setTimeout((function(){Z.querySelector(".catalog__sort").after(ee)}),50):Z.querySelector(".catalog__empty")&&setTimeout((function(){Z.querySelector(".catalog__empty").before(ee)}),50));var te=document.querySelector(".header__location"),re=document.querySelectorAll(".header__location .c-location__btn");te&&re.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),"true"===e.dataset.selected&&te.classList.remove("is--active")}))}));var ae=document.querySelector(".c-catalog"),ie=document.querySelector(".c-catalog__trigger"),se=document.querySelectorAll(".c-catalog__categories-link"),oe=document.querySelector(".c-catalog__dropdown"),ce=document.querySelector(".c-catalog__left"),ne=document.querySelector(".c-catalog__right");ae&&ie&&se&&(oe.addEventListener("click",(function(t){(t.target.classList.contains("c-catalog__dropdown")||t.target.classList.contains("container"))&&(t.preventDefault(),ae.classList.remove("is--active"),e(),document.querySelector(".header__wrapper--top")&&window.pageYOffset<=document.querySelector(".header__wrapper--top").getBoundingClientRect().height&&(b.querySelector(".header__fixed").style.boxShadow="none",b.querySelector(".header__fixed").style.position="relative"))})),ie.addEventListener("click",(function(t){t.preventDefault(),ae.classList.contains("is--active")?(ae.classList.remove("is--active"),e(),document.querySelector(".header__wrapper--top")&&window.pageYOffset<=document.querySelector(".header__wrapper--top").getBoundingClientRect().height&&(b.querySelector(".header__fixed").style.boxShadow="none",b.querySelector(".header__fixed").style.position="relative")):(te.classList.contains("is--active")&&te.classList.remove("is--active"),ae.classList.add("is--active"),e(1),r())})),se.forEach((function(e){e.addEventListener("mouseover",(function(){var t=e.dataset.category;document.querySelectorAll(".c-catalog__holder").forEach((function(e){e.classList.remove("is--active")})),se.forEach((function(e){e.classList.remove("is--active")})),e.classList.add("is--active"),document.querySelector('.c-catalog__holder[data-id="'+t+'"]').classList.add("is--active")}))})));var le=document.querySelectorAll(".categories__list"),de=document.querySelectorAll(".categories__view-all");le&&de&&(le.forEach((function(e){t(e)})),de.forEach((function(e){e.addEventListener("click",(function(r){r.preventDefault();var a=e.closest(".categories__item").querySelector(".categories__list"),i=a.querySelectorAll(".categories__list-item").length;a.classList.contains("is--full")?(a.classList.remove("is--full"),e.innerHTML="Показать все",t(a,9)):(a.classList.add("is--full"),e.innerHTML="Скрыть все",t(a,i))}))})));var ue=document.querySelectorAll(".catalog-categories__more");ue&&ue.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var r=e.closest(".catalog-categories__list");r.classList.contains("is--full")?(r.classList.remove("is--full"),e.innerHTML="Показать все"):(r.classList.add("is--full"),e.innerHTML="Скрыть")}))}));var pe=document.querySelectorAll(".validation-form");function me(e){var t=e.querySelectorAll('.input-field__input[data-validation="required"], .input-field__textarea[data-validation="required"]'),r=e.querySelector(".form-error"),a=t.length;t.forEach((function(e){var t=e.closest(".input-field");e.value.length>0&&(e.classList.contains("input-dadata-city")||e.classList.contains("input-dadata-street")?t.classList.contains("is--selected")&&a--:"tel"==e.type?13==e.value.replace(/[^+\d]/g,"").length&&a--:a--)})),0==a&&r&&r.classList.remove("is--active")}function _e(e){var t=e.querySelectorAll("[data-validation-block]"),r=e.querySelectorAll(".pharm_item"),a=e.querySelector(".totalinfo__pharmacy-btn + .totalinfo__error"),s=t.length,o=r.length;return t.forEach((function(e){(function(e){var t=e.querySelectorAll('.input-field__input[data-validation="required"], .input-field__textarea[data-validation="required"]'),r=e.querySelectorAll('.square-checkbox__input[data-validation="required"]'),a=e.querySelectorAll(".radio-checkbox__input"),s=e.querySelectorAll(".card-checkbox__input"),o=e.querySelector(".form-error"),c=!1,n=!1,l=!1,d=!1,u=!1;if(t&&t.length>0){var p=t.length;t.forEach((function(e){var t=e.closest(".input-field");e.value.length>0?e.classList.contains("input-dadata-city")||e.classList.contains("input-dadata-street")?t.classList.contains("is--selected")&&p--:"tel"==e.type?13==e.value.replace(/[^+\d]/g,"").length&&p--:p--:t.classList.add("is--error")})),0==p&&(c=!0),o&&(c?o.classList.remove("is--active"):o.classList.add("is--active"))}if(r&&r.length>0){var m=r.length;r.forEach((function(e){var t=e.closest(".square-checkbox");e.checked?(t.classList.remove("is--error"),m--):t.classList.add("is--error")})),0==m&&(n=!0),o&&(n?o.classList.remove("is--active"):o.classList.add("is--active"))}if(a&&a.length>0){var _=[],h=0;a.forEach((function(e){_.push(e.name)})),_=i(_),h=_.length,_.forEach((function(e){document.querySelectorAll('.radio-checkbox__input[name="'+e+'"]').forEach((function(e){e.checked&&h--}))})),0==h&&(l=!0),o&&(l?o.classList.remove("is--active"):(a.forEach((function(e){e.closest(".radio-checkbox").classList.add("is--error")})),o.classList.add("is--active")))}return s&&s.length>0&&(s.forEach((function(e){e.checked&&(d=!0)})),d?o&&o.classList.remove("is--active"):(s.forEach((function(e){e.closest(".card-checkbox").classList.add("is--error")})),o&&o.classList.add("is--active"))),t&&t.length>0&&r&&r.length>0?c&&n&&(u=!0):(c||n||l||d)&&(u=!0),u})(e)&&s--})),r?(r.forEach((function(e){e.value.length>1&&o--})),console.log(o),a&&(0!=o?a.classList.add("is--active"):a.classList.remove("is--active")),0==s&&0==o||(e.scrollIntoView({behavior:"smooth"}),!1)):0==s||(e.scrollIntoView({behavior:"smooth"}),!1)}pe&&pe.forEach((function(e){var t=e.querySelectorAll('.input-field__input[data-validation="required"], .input-field__textarea[data-validation="required"]'),r=e.querySelectorAll('.square-checkbox__input[data-validation="required"]'),a=e.querySelectorAll(".radio-checkbox__input"),s=e.querySelectorAll(".card-checkbox__input");t.forEach((function(e){e.addEventListener("input",(function(){var t=e.closest(".input-field"),r=e.closest("[data-validation-block]");e.value.length>0&&t.classList.contains("is--error")&&("tel"==e.type?13==e.value.replace(/[^+\d]/g,"").length&&(t.classList.remove("is--error"),r&&me(r)):(t.classList.remove("is--error"),r&&me(r)))})),e.addEventListener("blur",(function(){var t=e.closest(".input-field"),r=e.closest("[data-validation-block]");(0==e.value.length||"tel"==e.type&&13!=e.value.replace(/[^+\d]/g,"").length)&&(t.classList.add("is--error"),r&&me(r))}))})),r.forEach((function(e){e.addEventListener("input",(function(){!function(e){var t=e.querySelectorAll(".square-checkbox__input"),r=e.querySelector(".form-error"),a=t.length;t.forEach((function(e){var t=e.closest(".square-checkbox");e.checked&&(t.classList.remove("is--error"),a--)})),0==a&&r&&r.classList.remove("is--active")}(e.closest("[data-validation-block]"))}))})),a.forEach((function(e){e.addEventListener("input",(function(){!function(e){var t=e.querySelectorAll(".radio-checkbox__input"),r=e.querySelector(".form-error"),a=[],s=0;t.forEach((function(e){a.push(e.name)})),a=i(a),s=a.length,a.forEach((function(e){document.querySelectorAll('.radio-checkbox__input[name="'+e+'"]').forEach((function(t){t.checked&&(s--,document.querySelectorAll('.radio-checkbox__input[name="'+e+'"]').forEach((function(e){e.closest(".radio-checkbox").classList.remove("is--error")})))}))})),0==s&&r&&r.classList.remove("is--active")}(e.closest("[data-validation-block]"))}))})),s.forEach((function(e){e.addEventListener("input",(function(){!function(e){var t=e.querySelectorAll(".card-checkbox__input"),r=e.querySelector(".form-error"),a=!1;t.forEach((function(e){e.checked&&(a=!0)})),a&&(t.forEach((function(e){e.closest(".card-checkbox").classList.remove("is--error")})),r&&r.classList.remove("is--active"))}(e.closest("[data-validation-block]"))}))})),e.addEventListener("submit",(function(t){_e(e)?"ajax"==e.dataset.action&&(t.preventDefault(),sendingFormData(e)):t.preventDefault()}))}));var he=document.querySelector(".input-dadata-city"),ve=document.querySelector(".input-dadata-city ~ .input-field__dropdown"),ye=document.querySelector(".input-dadata-street"),fe=document.querySelector(".input-dadata-street ~ .input-field__dropdown"),ge="https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",be="8597dd60d3a83fb46930107993271556971eadf1";he&&ye&&(he.addEventListener("input",(function(){var e=he.closest(".input-field"),t=he.value,r=[],a={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+be},body:JSON.stringify({query:t,count:5,locations:[{country:"Беларусь",area:"Минский"},{country:"Беларусь",city:"Минск"}],from_bound:{value:"city"},to_bound:{value:"settlement"},restrict_value:!0})};e.classList.contains("is--selected")&&e.classList.remove("is--selected"),he.closest(".validation-form")&&he.closest(".validation-form").querySelectorAll(".input-field__input:not(.input-dadata-city)").forEach((function(e){e.value=""})),t.length>=2?fetch(ge,a).then((function(e){return e.text()})).then((function(t){if(JSON.parse(t).suggestions.forEach((function(e){null!=e.data.settlement_with_type?r.push(e.data.settlement_with_type):"relation:59195"==e.data.city_fias_id&&r.push(e.data.city_with_type)})),r.length>0){e.classList.add("is--dropdown"),ve.innerHTML="";for(var a=document.createElement("ul"),i=0;i<r.length;i++)a.innerHTML+='\n                                <li class="input-field__list-item">\n                                    <button class="input-field__list-elem">'.concat(r[i],"</button>\n                                </li>\n                            ");ve.append(a)}else e.classList.remove("is--dropdown"),ve.innerHTML=""})).catch((function(e){return console.log("error",e)})):(e.classList.remove("is--dropdown"),ve.innerHTML="")})),he.addEventListener("blur",(function(){var e=he.closest(".input-field"),t=he.closest("[data-validation-block]");e.classList.contains("is--selected")||(he.value="",e.classList.add("is--error"),me(t)),e.classList.contains("is--dropdown")&&e.classList.remove("is--dropdown")})),ye.addEventListener("input",(function(){var e=ye.closest(".input-field"),t=ye.value,r=he.value,a=r.split(" ").slice(1).join(" "),i=[],s={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+be},body:JSON.stringify({query:t,count:5,locations:[{country:"Беларусь",city:a},{country:"Беларусь",settlement:a}],from_bound:{value:"street"},to_bound:{value:"street"},restrict_value:!0})};e.classList.contains("is--selected")&&e.classList.remove("is--selected"),t.length>=2&&r.length>0?fetch(ge,s).then((function(e){return e.text()})).then((function(t){if(JSON.parse(t).suggestions.forEach((function(e){null!=e.data.street_with_type&&i.push(e.data.street_with_type)})),i=function(e){for(var t=1,r=1;t<e.length;++t)e[t]!==e[t-1]&&(e[r++]=e[t]);return e.length=r,e}(i),i.length>0&&null!=i[0]){e.classList.add("is--dropdown"),fe.innerHTML="";for(var r=document.createElement("ul"),a=0;a<i.length;a++)r.innerHTML+='\n                                <li class="input-field__list-item">\n                                    <button class="input-field__list-elem">'.concat(i[a],"</button>\n                                </li>\n                            ");fe.append(r)}else e.classList.remove("is--dropdown"),fe.innerHTML=""})).catch((function(e){return console.log("error",e)})):(e.classList.remove("is--dropdown"),fe.innerHTML="")})),ye.addEventListener("blur",(function(){var e=ye.closest(".input-field");e.classList.contains("is--dropdown")&&e.classList.remove("is--dropdown")})),document.body.addEventListener("mousedown",(function(e){if(e.target.classList.contains("input-field__list-elem")){e.preventDefault();var t=e.target.closest(".input-field");t.querySelector(".input-field__input").value=e.target.innerHTML,t.classList.remove("is--dropdown"),t.classList.add("is--selected")}})));var Se=document.getElementById("pharmacy-list"),Le=document.querySelectorAll(".pharmacy-list-trigger"),ke=document.querySelectorAll(".pharmacy-list-edit-address"),we=document.querySelector(".pharmacy-list__close");if(Se&&Le&&we){if(Se.addEventListener("click",(function(e){if(e.preventDefault(),e.target.classList.contains("c-schedule__trigger")||e.target.closest(".c-schedule__trigger")){e.preventDefault();var t=e.target.closest(".c-schedule"),r=function(){t.classList.remove("is--active")},a=c([e.target.parentNode],r);t.classList.contains("is--active")?r():(t.classList.add("is--active"),a.setBodyChecker())}})),Le.forEach((function(t){t.addEventListener("click",(function(t){if(t.preventDefault(),!Se.classList.contains("is--active")){Se.classList.add("is--active"),Se.classList.remove("custom_address"),Se.removeAttribute("data-address-for"),e(1);var r=_toConsumableArray(document.querySelectorAll(".pharmacy-list__item")).sort((function(e,t){var r=e.querySelector(".pharmacy-list-card__status");function a(e){return e.classList.contains("pharmacy-list-card__status--green")?Number(1e6):e.classList.contains("pharmacy-list-card__status--yellow")?Number(e.querySelector("span").innerHTML.split(" ")[2]):e.classList.contains("pharmacy-list-card__status--red")?Number(0):void 0}return a(t.querySelector(".pharmacy-list-card__status"))-a(r)})),a=document.querySelector(".pharmacy-list__wrapper");a.innerHTML=null,r.forEach((function(e){return a.appendChild(e)}))}}))})),we.addEventListener("click",(function(t){t.preventDefault(),Se.classList.contains("is--active")&&(Se.classList.remove("custom_address"),Se.classList.remove("is--active"),e(),document.querySelector('[data-btn-sort="stock"]')&&document.querySelector('[data-btn-sort="stock"]').classList.remove("is--hidden"),document.querySelector(".pharmacy-list-sort__select--stock")&&document.querySelector(".pharmacy-list-sort__select--stock").classList.remove("is--hidden"))})),ke&&ke.forEach((function(t){t.addEventListener("click",(function(r){var a=t.dataset.item;$(".pharmacy-list .pharmacy-list-card__btn").each((function(){var e=String($(this).data("missing")),t=String($(this).data("ost")),r=$(this).closest(".pharmacy-list__item"),i=0;parseInt($(".order_basket_"+a+" .ost_sklad span").text());(t=t.split(";")).forEach((function(e,t){e.split(":")[0]==a&&(i=e.split(":")[1])})),(e=e.split("|"))||(e[0]=String($(this).data("missing"))),-1==jQuery.inArray(String(a),e)?(r.find(".pharmacy-list-card__btn").removeAttr("disabled"),r.find(".availability").html('<span class="pharmacy-list-card__status pharmacy-list-card__status--green"><span>В наличии</span></span><div class="pharmacy-list-card__elems"><span class="pharmacy-list-card__elem">Аптека: '+i+" шт</span></div>")):(r.find(".pharmacy-list-card__btn").attr("disabled","disabled"),r.find(".availability").html('<span class="pharmacy-list-card__status pharmacy-list-card__status--red"><span>Нет в наличии</span></span>'))})),document.querySelector('[data-btn-sort="stock"]')&&document.querySelector('[data-btn-sort="stock"]').classList.remove("is--hidden"),document.querySelector(".pharmacy-list-sort__select--stock")&&document.querySelector(".pharmacy-list-sort__select--stock").classList.remove("is--hidden"),Se.classList.contains("is--active")||(Se.classList.add("is--active"),e(1)),Se.classList.add("custom_address"),Se.dataset.addressFor=a}))})),1==$(".pharm_item").length){var qe=$(".el_order").attr("class").split(" "),Ee="";qe.forEach((function(e,t,r){e.indexOf("order_basket_")>=0&&(Ee=e.replace("order_basket_",""))})),$(".pharmacy-list .pharmacy-list-card__btn").each((function(){var e=String($(this).data("missing")),t=$(this).closest(".pharmacy-list__item"),r=String($(this).data("ost")),a=0;parseInt($(".order_basket_"+Ee+" .ost_sklad span").text());(r=r.split(";")).forEach((function(e,t){e.split(":")[0]==Ee&&(a=e.split(":")[1])})),(e=e.split("|"))||(e[0]=String($(this).data("missing"))),-1==jQuery.inArray(String(Ee),e)?(t.find(".pharmacy-list-card__btn").removeAttr("disabled"),t.find(".availability").html('<span class="pharmacy-list-card__status pharmacy-list-card__status--green"><span>В наличии</span></span><div class="pharmacy-list-card__elems"><span class="pharmacy-list-card__elem">Аптека: '+a+" шт</span></div>")):(t.find(".pharmacy-list-card__btn").attr("disabled","disabled"),t.find(".availability").html('<span class="pharmacy-list-card__status pharmacy-list-card__status--red"><span>Нет в наличии</span></span>'))}))}$(".pharmacy-list").on("click",".pharmacy-list-card__btn, .c-map-balloon__btn",(function(t){t.preventDefault();$(this).data("bitrix-id");var r=$(this).data("ext-id"),a=String($(this).data("missing")),i=this.dataset.stock;(a=a.split("|"))||(a[0]=String($(this).data("missing")));var s=String($(this).data("ost")).slice(0,-1);s=s.split(";");var o=$(this).closest(".pharmacy-item").find(".pharmacy-name").text()+", "+$(this).closest(".pharmacy-item").find(".pharmacy-address").text();o=(o=(o=(o=o.replace(/ +/g," ").trim()).replaceAll("\t","")).replaceAll("\n","")).replace(/\s,/,"");var c={},n=0;if($(".pharmacy-list").hasClass("custom_address")){var l=Se.dataset.addressFor;if(console.log(l),-1==jQuery.inArray(String(l),a)){$('.pharm_item[name="pharm_'+l+'"]').val(r),$('.pharmacy-list__item[name="pharm_'+l+'"]').val(r),$(".order_basket_"+l+" .c-choosing-pharmacy__wrapper").removeClass("c-choosing-pharmacy__wrapper--red"),$(".order_basket_"+l+" .c-choosing-pharmacy__wrapper").addClass("c-choosing-pharmacy__wrapper--grey"),$(".order_basket_"+l+" .c-choosing-pharmacy__elem > span").remove(),$(".order_basket_"+l+" .c-choosing-pharmacy__elem").prepend("<span><span>Самовывоз: </span> "+o+"</span>"),$(".order_basket_"+l+" .c-choosing-pharmacy__elem a").text("Изменить"),c.address=o,c.product=l,c.pharm=r,n=1;var d=0;if(s.forEach((function(e,t){e.split(":")[0]==l&&(d=e.split(":")[1])})),c.ost=d,$(".order_basket_"+l+" .stock")){var u=String($(".order_basket_"+l+" .stock").data("value")),p=$('.product_reserve_count[data-basket="'+l+'"]');isNaN(u)?(p.attr("data-max",Number(d)),p.data("max",Number(d)),Number(p.val())>Number(d)&&(p.val(Math.floor(Number(d))),p.change())):(p.attr("data-max",Number(d)+Number(u)),p.data("max",Number(d)+Number(u)),Number(p.val())>Number(d)+Number(u)&&(p.val(Math.floor(Number(d)+Number(u))),p.change()))}else{(p=$('.product_reserve_count[data-basket="'+l+'"]')).attr("data-max",d),p.data("max",d),Number(p.val())>d&&(p.val(Math.floor(d)),p.change())}$(".order_basket_"+l+" .ostatok").removeClass("hidden").text("Аптека: "+d)}else $('.pharmacy-list__item[name="pharm_'+l+'"]').val(""),$(".order_basket_"+l+" .c-choosing-pharmacy__wrapper").removeClass("c-choosing-pharmacy__wrapper--grey"),$(".order_basket_"+l+" .c-choosing-pharmacy__wrapper").addClass("c-choosing-pharmacy__wrapper--red"),$(".order_basket_"+l+" .c-choosing-pharmacy__elem > span").remove(),$(".order_basket_"+l+" .c-choosing-pharmacy__elem").prepend("<span><b>Нет в наличии: </b> "+o+"</span>"),$(".order_basket_"+l+" .c-choosing-pharmacy__elem a").text("Изменить"),$(".order_basket_"+l+" .ostatok").removeClass("hidden").text("Аптека: 0"),c.product=l,c.red_address=o,n=1;$(".order_basket_"+l+" .stock")&&(c.delivery_date=i,$(".order_basket_"+l+" .stock").removeClass("hidden"),$(".order_basket_"+l+" .stock .c-sm-info__text").text("Срок доставки со склада в вашу аптеку: "+i))}else if($(".pharmacy-list").hasClass("add_address")){l=Se.dataset.addressFor;var m=$(".orders_id_"+l).attr("class").split(" "),_="";if(m.forEach((function(e,t,r){e.indexOf("order_basket_")>=0&&(_=e.replace("order_basket_",""))})),-1==jQuery.inArray(String(l),a)){$('.pharm_item[name="pharm_'+_+'"]').val(r),$(".order_basket_"+l+" .c-choosing-pharmacy__wrapper").removeClass("c-choosing-pharmacy__wrapper--red"),$(".order_basket_"+l+" .c-choosing-pharmacy__wrapper").addClass("c-choosing-pharmacy__wrapper--grey"),$(".order_basket_"+l+" .c-choosing-pharmacy__elem > span").remove(),$(".order_basket_"+l+" .c-choosing-pharmacy__elem").prepend("<span><span>Самовывоз: </span> "+o+"</span>"),console.log($(".order_basket_"+l+" .basket__choosing-pharmacy")),$(".order_basket_"+l+" .c-choosing-pharmacy__elem a").text("Изменить"),c.address=o,c.product=_,c.pharm=r,n=1;d=0;if(s.forEach((function(e,t){e.split(":")[0]==_&&(d=e.split(":")[1])})),c.ost=d,$(".order_basket_"+l+" .stock")){u=String($(".order_basket_"+_+" .stock").data("value")),p=$('.product_reserve_count[data-basket="'+_+'"]');isNaN(u)?(p.attr("data-max",Number(d)),p.data("max",Number(d)),Number(p.val())>Number(d)&&(p.val(Math.floor(Number(d))),p.change())):(p.attr("data-max",Number(d)+Number(u)),p.data("max",Number(d)+Number(u)),Number(p.val())>Number(d)+Number(u)&&(p.val(Math.floor(Number(d)+Number(u))),p.change()))}else{(p=$('.product_reserve_count[data-basket="'+_+'"]')).attr("data-max",d),p.data("max",d),Number(p.val())>d&&(p.val(Math.floor(d)),p.change())}$(".order_basket_"+_+" .ostatok").removeClass("hidden").text("Аптека: "+d)}else $('.pharm_item[name="pharm_'+_+'"]').val(""),$(".order_basket_"+l+" .c-choosing-pharmacy__wrapper").removeClass("c-choosing-pharmacy__wrapper--grey"),$(".order_basket_"+l+" .c-choosing-pharmacy__wrapper").addClass("c-choosing-pharmacy__wrapper--red"),$(".order_basket_"+l+" .c-choosing-pharmacy__elem > span").remove(),$(".order_basket_"+l+" .c-choosing-pharmacy__elem").prepend("<span><b>Нет в наличии: </b> "+o+"</span>"),console.log($(".order_basket_"+l+" .basket__choosing-pharmacy")),$(".order_basket_"+l+" .c-choosing-pharmacy__elem a").text("Изменить"),$(".order_basket_"+l+" .ostatok").removeClass("hidden").text("Аптека: 0"),c.product=_,c.red_address=o,n=1;$(".order_basket_"+l+" .stock")&&(c.delivery_date=i,$(".order_basket_"+l+" .stock").removeClass("hidden"),$(".order_basket_"+l+" .stock .c-sm-info__text").text("Срок доставки со склада в вашу аптеку: "+i))}else $(".pharm_item").each((function(e,t){var l={},d=$(t).data("bitem"),u=$(".order_basket_"+d).attr("class").split(" ");if(u.forEach((function(e,t,r){e.indexOf("order_basket_")>=0&&e.replace("order_basket_","")})),-1==jQuery.inArray(String(d),a)){$(t).val(r),$(".order_basket_"+d+" .c-choosing-pharmacy__wrapper").removeClass("c-choosing-pharmacy__wrapper--red"),$(".order_basket_"+d+" .c-choosing-pharmacy__wrapper").addClass("c-choosing-pharmacy__wrapper--grey"),$(".order_basket_"+d+" .c-choosing-pharmacy__elem > span").remove(),$(".order_basket_"+d+" .c-choosing-pharmacy__elem").prepend("<span><span>Самовывоз: </span> "+o+"</span>"),console.log($(".order_basket_"+d+" .basket__choosing-pharmacy")),$(".order_basket_"+d+" .c-choosing-pharmacy__elem a").text("Изменить"),l.address=o,l.product=d,l.pharm=r,n=2;var p=0;if(s.forEach((function(e,t){e.split(":")[0]==d&&(p=e.split(":")[1])})),$(".order_basket_"+d+" .stock")){var m=String($(".order_basket_"+d+" .stock").data("value")),_=$('.product_reserve_count[data-basket="'+d+'"]');isNaN(m)?(_.attr("data-max",Number(p)),_.data("max",Number(p)),Number(_.val())>Number(p)&&(_.val(Math.floor(Number(p))),_.change())):(_.attr("data-max",Number(p)+Number(m)),_.data("max",Number(p)+Number(m)),Number(_.val())>Number(p)+Number(m)&&(_.val(Math.floor(Number(p)+Number(m))),_.change()))}else{(_=$('.product_reserve_count[data-basket="'+d+'"]')).attr("data-max",p),_.data("max",p),Number(_.val())>p&&(_.val(Math.floor(p)),_.change())}$(".order_basket_"+d+" .ostatok").removeClass("hidden").text("Аптека: "+p),l.ost=p,c["item_"+d]=l}else $(t).val(""),$(".order_basket_"+d+" .c-choosing-pharmacy__wrapper").removeClass("c-choosing-pharmacy__wrapper--grey"),$(".order_basket_"+d+" .c-choosing-pharmacy__wrapper").addClass("c-choosing-pharmacy__wrapper--red"),$(".order_basket_"+d+" .c-choosing-pharmacy__elem > span").remove(),$(".order_basket_"+d+" .c-choosing-pharmacy__elem").prepend("<span><b>Нет в наличии: </b> "+o+"</span>"),console.log($(".order_basket_"+d+" .basket__choosing-pharmacy")),$(".order_basket_"+d+" .c-choosing-pharmacy__elem a").text("Изменить"),$(".order_basket_"+d+" .ostatok").removeClass("hidden").text("Аптека: 0"),l.red_address=o,l.product=d,l.ost=0,c["item_"+d]=l,n=2;$(".order_basket_"+d+" .stock")&&(l.delivery_date=i,$(".order_basket_"+d+" .stock").removeClass("hidden"),$(".order_basket_"+d+" .stock .c-sm-info__text").text("Срок доставки со склада в вашу аптеку: "+i))}));console.log(c),$.get("/ajax/basket.php",{request:"set_session",data:JSON.stringify(c),obj_type:n}).done((function(e){var t=new URL(document.location);t.searchParams.delete("add_prod"),window.history.pushState({},"",t.toString())})),Se.classList.remove("is--active"),Se.classList.remove("custom_address"),Se.removeAttribute("data-address-for"),e(),document.querySelector('[data-btn-sort="stock"]')&&document.querySelector('[data-btn-sort="stock"]').classList.remove("is--hidden"),document.querySelector(".pharmacy-list-sort__select--stock")&&document.querySelector(".pharmacy-list-sort__select--stock").classList.remove("is--hidden")}))}var xe=document.querySelector(".main-banners__slider .swiper");if(xe)new Swiper(xe,{slidesPerView:1,loop:!0,autoplay:{delay:5e3},navigation:{prevEl:".main-banners__slider .swiper-button-prev",nextEl:".main-banners__slider .swiper-button-next"}});var Ae=document.querySelector(".content-slider__slider .swiper");if(Ae)new Swiper(Ae,{slidesPerView:1,loop:!0,autoplay:{delay:5e3},navigation:{prevEl:".content-slider__slider .swiper-button-prev",nextEl:".content-slider__slider .swiper-button-next"}});var $e=document.querySelector(".similar-products__slider .swiper"),Ne=document.querySelectorAll(".similar-products-content__slider:not(.similar-products-content__slider--short) .swiper"),Ce=document.querySelectorAll(".similar-products-content__slider--short .swiper");if($e&&window.innerWidth>=744)new Swiper($e,{slidesPerView:5,spaceBetween:28,loop:!0,navigation:{prevEl:".similar-products__slider .swiper-button-prev",nextEl:".similar-products__slider .swiper-button-next"},breakpoints:{744:{slidesPerView:3,spaceBetween:10},1200:{slidesPerView:4,spaceBetween:28},1400:{slidesPerView:5}}});Ne&&Ne.forEach((function(e){new Swiper(e,{slidesPerView:5,spaceBetween:28,loop:!0,navigation:{prevEl:e.closest(".similar-products-content").querySelector(".swiper-button-prev"),nextEl:e.closest(".similar-products-content").querySelector(".swiper-button-next")},breakpoints:{0:{slidesPerView:"auto",spaceBetween:5},744:{slidesPerView:3,spaceBetween:10},1200:{slidesPerView:4,spaceBetween:28},1400:{slidesPerView:5}}})})),Ce&&Ce.forEach((function(e){new Swiper(e,{slidesPerView:4,spaceBetween:32,loop:!0,navigation:{prevEl:e.closest(".similar-products-content").querySelector(".swiper-button-prev"),nextEl:e.closest(".similar-products-content").querySelector(".swiper-button-next")},breakpoints:{0:{slidesPerView:"auto",spaceBetween:5},744:{slidesPerView:2,spaceBetween:10},1024:{slidesPerView:3,spaceBetween:10},1200:{slidesPerView:4,spaceBetween:28},1400:{slidesPerView:4}}})}));var Be=document.querySelector(".pickup-point__slider .swiper");if(Be)new Swiper(Be,{slidesPerView:1,loop:!0,navigation:{prevEl:".pickup-point__slider .swiper-button-prev",nextEl:".pickup-point__slider .swiper-button-next"}});var Te=document.querySelector(".often-buy__slider .swiper");if(Te)new Swiper(Te,{slidesPerView:4,spaceBetween:22,loop:!0,navigation:{prevEl:".often-buy__slider .swiper-button-prev",nextEl:".often-buy__slider .swiper-button-next"},breakpoints:{0:{slidesPerView:1,spaceBetween:10},744:{slidesPerView:2,spaceBetween:22},1024:{slidesPerView:3},1200:{slidesPerView:4}}});var Pe=document.querySelector(".product__slider .gallery-thumbs"),De=document.querySelector(".product__slider .gallery-main");if(Pe&&De){var Me=new Swiper(Pe,{allowTouchMove:!1,slidesPerView:4,spaceBetween:10,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{0:{slidesPerView:5,direction:"horizontal"},744:{slidesPerView:4,direction:"vertical",loopedSlides:4,thumbs:{swiper:Me}}}}),He=new Swiper(De,{slidesPerView:1,spaceBetween:0,preloadImages:!1,breakpoints:{744:{loopedSlides:4,thumbs:{swiper:Me}}}});Pe.querySelectorAll(".swiper-slide").forEach((function(e){e.addEventListener("click",(function(){Pe.querySelectorAll(".swiper-slide").forEach((function(e){return e.classList.remove("is--active")})),e.classList.add("is--active"),He.slideTo(e.dataset.index)}))})),He.on("slideChange",(function(){Pe.querySelectorAll(".swiper-slide").forEach((function(e){return e.classList.remove("is--active")})),Pe.querySelectorAll(".swiper-slide")[He.activeIndex].classList.add("is--active")}))}var Re=document.getElementById("similar-products"),Ie=document.querySelectorAll(".similar-products-btn"),Oe=document.getElementById("similar-products-close");Re&&Ie&&Oe&&(Re.addEventListener("click",(function(t){(t.target.classList.contains("similar-products")||t.target.classList.contains("similar-products__wrap"))&&(t.preventDefault(),Re.classList.remove("is--active"),e())})),Ie.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),Re.classList.add("is--active"),e(1)}))})),Oe.addEventListener("click",(function(t){t.preventDefault(),Re.classList.remove("is--active"),e()})));var Ve=document.getElementById("img-popup"),je=document.querySelectorAll(".img-popup-btn"),We=document.getElementById("img-popup-close");Ve&&je&&We&&(Ve.addEventListener("click",(function(t){(t.target.classList.contains("img-popup")||t.target.classList.contains("img-popup__wrap"))&&(t.preventDefault(),Ve.classList.remove("is--active"),Ve.querySelector(".img-popup__img img").src="#",e())})),je.forEach((function(t){t.addEventListener("click",(function(r){r.preventDefault(),Ve.classList.add("is--active"),Ve.querySelector(".img-popup__img img").src=t.dataset.img,e(1)}))})),We.addEventListener("click",(function(t){t.preventDefault(),Ve.classList.remove("is--active"),Ve.querySelector(".img-popup__img img").src="#",e()})));var Ye=window.pageYOffset;window.addEventListener("scroll",(function(){var e=window.pageYOffset;Ye>e||Ye<=0?document.body.classList.contains("scroll-disabled")||b&&(document.querySelector(".header__wrapper--top")?document.querySelector(".top-notice")?window.pageYOffset<=document.querySelector(".top-notice").getBoundingClientRect().height+document.querySelector(".header__wrapper--top").getBoundingClientRect().height&&(b.querySelector(".header__fixed").style.boxShadow="none",b.querySelector(".header__fixed").style.position="relative"):window.pageYOffset<=document.querySelector(".header__wrapper--top").getBoundingClientRect().height&&(b.querySelector(".header__fixed").style.boxShadow="none",b.querySelector(".header__fixed").style.position="relative"):document.querySelector(".top-notice")?window.pageYOffset<=document.querySelector(".top-notice").getBoundingClientRect().height&&(b.querySelector(".header__fixed").style.boxShadow="none",b.querySelector(".header__fixed").style.position="relative"):window.pageYOffset<=0&&(b.querySelector(".header__fixed").style.boxShadow="none",b.querySelector(".header__fixed").style.position="relative")):document.body.classList.contains("scroll-disabled")||b&&(document.querySelector(".header__wrapper--top")?document.querySelector(".top-notice")?window.pageYOffset>=document.querySelector(".top-notice").getBoundingClientRect().height+document.querySelector(".header__wrapper--top").getBoundingClientRect().height&&(b.querySelector(".header__fixed").style.boxShadow="0px 1px 4px 0px rgba(0, 0, 0, 0.10)",b.querySelector(".header__fixed").style.position="fixed",te&&te.classList.contains("is--active")&&te.classList.remove("is--active")):window.pageYOffset>=document.querySelector(".header__wrapper--top").getBoundingClientRect().height&&(b.querySelector(".header__fixed").style.boxShadow="0px 1px 4px 0px rgba(0, 0, 0, 0.10)",b.querySelector(".header__fixed").style.position="fixed",te&&te.classList.contains("is--active")&&te.classList.remove("is--active")):document.querySelector(".top-notice")?window.pageYOffset>=document.querySelector(".top-notice").getBoundingClientRect().height&&(b.querySelector(".header__fixed").style.position="fixed"):window.pageYOffset>=0&&(b.querySelector(".header__fixed").style.position="fixed")),ae&&ae.classList.contains("is--active")&&r(),Ye=e})),window.addEventListener("resize",(function(){a()})),window.addEventListener("unload",(function(){document.querySelector(".validation-form")&&setTimeout((function(){document.querySelector(".validation-form").reset()}),1e4)}))}));